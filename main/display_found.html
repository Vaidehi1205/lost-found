<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Found Items Panel</title>
    <link rel="stylesheet" href="/css/admin.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <style>
      /* =================== NAVBAR =================== */
  nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: #1f2f44; /* Keep navbar same */
    color: white;
    position: relative;
  }

  .nav-left {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .nav-left .logo {
    height: 40px;
  }

  .nav-right {
    display: flex;
    align-items: center;
    gap: 15px;
  }


      /* ------------------ Back Arrow ------------------ */
      .back {
        margin: 20px 0 0 25px;
      }

      .back a i {
        color: #16263b;
        font-size: 28px;
        transition: color 0.3s ease, transform 0.3s ease;
      }

      .back a i:hover {
        color: #4da6ff;
        transform: translateX(-5px);
      }

      .foundItemsContainer {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
        margin: 30px;
        padding: 10px;
      }

      /* ------------------ Card Layout ------------------ */
.item-card {
  display: flex;
  flex-direction: column;       /* stack content vertically */
  align-items: flex-start;
  gap: 12px;                    /* space between texts/buttons */
  border-radius: 12px;
  padding: 20px;
  background: #1f2f44;          /* dark card background */
  color: #e0e7ff;               /* light text */
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.item-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
}

/* ------------------ Info Styling ------------------ */
.item-info h3 {
  margin: 0 0 8px;
  font-size: 22px;
  color: #82c7ff;              /* title color */
}

.item-info p {
  margin: 4px 0;
  font-size: 15px;
  color: #dbeafe;              /* light text */
}

.item-info p strong {
  color: #ffffff;              /* labels stand out */
}

/* ------------------ Button Styling ------------------ */
.Verification-request {
  background: #4da6ff;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  margin-top: 10px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  transition: background 0.2s, box-shadow 0.2s;
}

.Verification-request:hover {
  background: #82c7ff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

    </style>
  </head>
  <body>
    <nav>
      <div class="nav-left">
        <img src="/images/logo.png" class="logo" />
        <span class="name">ClaimConnect</span>
      </div>
      <div class="nav-right">
        <a href="/main/login.html"><i class="fa-solid fa-circle-user" id="profile"></i></a>
      </div>
    </nav>
    <div class="back">
      <a href="index.html"><i class="fa-solid fa-arrow-left"></i></a>
    </div>
    
    <!-- Container for found items -->
    <div id="foundItemsContainer"
      style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px;">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      const username = localStorage.getItem("username");
  async function fetchFoundItems() {
    try {
      const res = await axios.get("http://localhost:3000/api/found-items");
      const foundItem = res.data;
      const container = document.getElementById("foundItemsContainer");
      container.innerHTML = "";
      const username = localStorage.getItem("username");

      foundItem.forEach(item => {
        const card = document.createElement("div");
        card.className = "item-card";

        // âœ… Item details
        const info = document.createElement('div');
        info.className = 'item-info';
        info.innerHTML = `
          <h3>${item.item_name}</h3>
          <p><strong>Finder:</strong> ${item.finder_name}</p>
          <p><strong>Location:</strong> ${item.location}</p>
          <p><strong>Date Found:</strong> ${new Date(item.date_found).toLocaleDateString()}</p>
          <button class="Verification-request">Request Verification</button>
        `;
        card.appendChild(info);

        // Add click event to the button
        const button = info.querySelector('.Verification-request');
        button.addEventListener('click', () => {
  window.location.href = `verification.html?itemId=${item.id}&item_name=${encodeURIComponent(item.item_name)}&username=${encodeURIComponent(username)}`;
});

        container.appendChild(card);
      });
    } catch (error) {
      console.error("Error fetching found items:", error);
    }
  }

  window.onload = fetchFoundItems;
</script>
  </body>
</html>
